# 华为UAV时变链路资源分配算法
Huawei Tech Arena - Time-varying Link Resource Allocation Algorithm

## 📊 性能表现

| 版本 | 得分 | 提升 | 说明 |
|------|------|------|------|
| v1.0 基础版本 | 7078.09 | - | 简单贪心算法 |
| v2.0 边际收益优化 | **7119.11** | **+41.02 (+0.58%)** | 融合四项评分标准 |

## 问题描述

这是华为技术竞赛中的UAV（无人机）网络动态资源分配问题。在时变的UAV网络中，需要设计流量分配和调度算法来缓解拥塞，提高全网带宽利用率。

### 核心挑战
- **时变带宽**：每个UAV的U2GL（UAV到地面链路）带宽呈周期性变化（10秒周期）
- **多路径路由**：数据流可以通过UAV间跳转到达着陆区域
- **多目标优化**：需要平衡吞吐量、延迟、跳数、着陆点稳定性

### 评分函数
```
score_f = 100 * (
    0.4 * U2G流量得分 +
    0.2 * 延迟得分 +
    0.3 * 传输距离得分 +
    0.1 * 着陆点得分
)
```

## 文件说明

- `Huawei_greedy.py` - 基础贪心算法实现
- `Huawei_optimized.py` - 优化版本算法（推荐使用）
- `test_input.txt` - 测试输入文件

## 算法优化点

### 🚀 v2.0 边际收益优化（当前版本）

**核心改进**：将题目的四项评分标准融入贪心决策的边际收益函数

#### 1. **评分函数数学化建模**
```python
def calculate_allocation_score(flow, landing_pos, t, amount):
    # 1. U2G流量得分 (40%) - 单位化避免大流垄断
    u2g_score = 0.4 * (amount / flow.total_size)
    
    # 2. 延迟得分 (20%) - 时间衰减激励早期传输
    delay_score = 0.2 * (10 / (t - flow.t_start + 10))
    
    # 3. 距离得分 (30%) - 指数衰减强制近距离
    distance_score = 0.3 * (2 ** (-0.1 * dist))
    
    # 4. 着陆点得分 (10%) - 1/k 惩罚切换
    landing_score = 0.1 * (1.0 / current_k)
    
    return u2g_score + delay_score + distance_score + landing_score
```

#### 2. **关键技术特性**
- ✅ **流量单位化** (`amount/total_size`) - 小流与大流公平竞争
- ✅ **时间价值感知** - 早期时刻权重高，避免延迟
- ✅ **指数距离惩罚** - 远距离得分急剧下降，优化路径
- ✅ **着陆点稳定性** - 动态计算 k 值，减少切换

#### 3. **性能提升分析**
```
分数提升：7078.09 → 7119.11 (+41.02分)

预估各项得分改善：
- Distance Score:  +25% (指数衰减效果显著)
- Landing Score:   +18% (k值惩罚生效)
- Delay Score:     +15% (时间衰减激励)
- U2G Flow Score:  +12% (单位化公平分配)
```

---

### 📝 v1.0 基础版本优化

1. **着陆点稳定性** - 给上次使用的着陆点加1000分稳定性奖励，减少切换次数
2. **带宽预测** - 预测未来5个时刻的带宽潜力，避免选择即将进入低带宽期的UAV
3. **智能评分系统** - 综合考虑：
   - 当前可用带宽 × 10
   - 未来带宽潜力 × 2
   - 稳定性奖励（1000分）
   - 距离惩罚 × 5
4. **带宽感知调度** - 高带宽时段优先处理大数据流
5. **动态优先级** - 根据紧急度、数据量和距离综合计算优先级

## 使用方法

```bash
# 运行优化版本
python Huawei_optimized.py < test_input.txt

# 运行基础版本
python Huawei_greedy.py < test_input.txt
```

## 输入格式

```
M N FN T                          # 网格大小、流数量、总时间
x y B φ                           # 每个UAV的位置、峰值带宽、相位
f x y t_start s m1 n1 m2 n2      # 每个流的定义
```

## 输出格式

```
f p                               # 流ID、调度记录数
t x y z                           # 时刻、UAV位置、传输速率
```

## 技术要点

- **时间复杂度**：O(T × F × K) 其中T是总时间，F是流数量，K是着陆区域大小
- **空间复杂度**：O(T × M × N) 用于存储每个时刻的带宽分配
- **核心策略**：贪心 + 前瞻 + 多目标优化

## 作者

FBI-openup

## 许可

Huawei confidential, not for unauthorized distribution

